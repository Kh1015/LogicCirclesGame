Added the directional node logic